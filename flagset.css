/* ===== 主題色（你可以自己改） ===== */
:root{
  --ink:#2b2b2b;
  --paper:#fffaf2;
  --card:#ffffff;
  --primary:#667eea;
  --primary2:#764ba2;
  --muted:#6b7280;
  --shadow: 0 10px 30px rgba(0,0,0,.18);
}

/* ===== 全頁背景 ===== */
.flag-page{
  min-height:100vh;
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
  color:var(--ink);
  background: radial-gradient(1200px 600px at 20% 10%, rgba(118,75,162,.35), transparent 55%),
              radial-gradient(1200px 700px at 80% 20%, rgba(102,126,234,.35), transparent 55%),
              linear-gradient(180deg, #0b1020 0%, #131a2d 55%, #0b1020 100%);
}

/* 背景層，不阻擋互動 */
.bg-layers{ position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
.stars{ position:absolute; inset:0; }
.star{
  position:absolute;
  width:2px; height:2px;
  background:rgba(255,255,255,.85);
  border-radius:99px;
  opacity:.85;
  animation: twinkle 3.5s ease-in-out infinite;
}
.star.s2{ width:3px; height:3px; opacity:.9; }
.star.s3{ width:4px; height:4px; opacity:.95; }
@keyframes twinkle{
  0%,100%{ transform:scale(1); opacity:.7;}
  50%{ transform:scale(1.6); opacity:1;}
}

/* waves */
.waves{ position:absolute; left:0; right:0; bottom:-30px; height:280px; }
.wave-layer{
  position:absolute; left:-50%; width:200%; height:160px; bottom:0;
  background-repeat:repeat-x;
  background-size: 900px 160px;
  opacity:.65;
  filter: blur(.2px);
  animation: waveMove 18s linear infinite;
}
.wave-layer.layer1{
  bottom:0;
  opacity:.6;
  background-image:
    radial-gradient(30px 16px at 30px 30px, rgba(102,126,234,.55), transparent 70%),
    radial-gradient(40px 20px at 140px 50px, rgba(118,75,162,.45), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
}
.wave-layer.layer2{
  bottom:35px;
  opacity:.45;
  animation-duration: 28s;
  background-image:
    radial-gradient(34px 18px at 50px 42px, rgba(255,255,255,.12), transparent 70%),
    radial-gradient(48px 22px at 200px 70px, rgba(102,126,234,.18), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
}
.wave-layer.layer3{
  bottom:70px;
  opacity:.30;
  animation-duration: 38s;
  background-image:
    radial-gradient(50px 24px at 90px 60px, rgba(118,75,162,.18), transparent 70%),
    radial-gradient(60px 26px at 260px 95px, rgba(102,126,234,.15), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
}
@keyframes waveMove{
  from{ transform:translate3d(0,0,0); }
  to{ transform:translate3d(900px,0,0); }
}

/* ===== 內容外殼 ===== */
.content-shell{
  position:relative;
  z-index:1;
  max-width:1100px;
  margin:0 auto;
  padding:32px 18px 70px;
}

/* header */
.page-header{ margin-bottom:16px; }
.page-title{
  display:flex; align-items:center; gap:10px;
  color:#fff;
  font-weight:900;
  letter-spacing:.5px;
  margin:0;
}
.page-icon{ color: #ffd166; }
.page-subtitle{
  margin:6px 0 0;
  color: rgba(255,255,255,.8);
  font-size: 14px;
}

/* grid */
.flagset-grid{
  display:grid;
  grid-template-columns: 1.05fr .95fr;
  gap:16px;
}
@media (max-width: 992px){
  .flagset-grid{ grid-template-columns: 1fr; }
}

/* ===== 卡片 ===== */
.cardx{
  background: rgba(255,255,255,.96);
  border: 1px solid rgba(102,126,234,.25);
  border-radius: 18px;
  box-shadow: var(--shadow);
  overflow:hidden;
}
.cardx-header{
  padding:16px 16px 10px;
  background: linear-gradient(135deg, rgba(102,126,234,.14), rgba(118,75,162,.10));
  border-bottom: 1px solid rgba(102,126,234,.18);
}
.cardx-title{
  margin:0;
  font-weight:900;
  color:#1f2937;
}
.cardx-title.small{ font-size: 14px; }
.cardx-subtitle{
  margin:6px 0 0;
  color: var(--muted);
  font-size: 12px;
}
.cardx-body{ padding:16px; }
.cardx-body.compact{ padding:12px 12px 14px; }

.with-action{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}

/* ===== 表單 ===== */
.form-row{ display:flex; gap:10px; }
.form-col{ display:flex; flex-direction:column; gap:6px; }
.labelx{ font-size:12px; color:#374151; font-weight:800; }
.inputx{
  width:100%;
  border-radius:12px;
  border:1px solid rgba(31,41,55,.18);
  padding:10px 12px;
  outline:none;
  background:#fff;
  transition: box-shadow .18s ease, border-color .18s ease;
}
.inputx:focus{
  border-color: rgba(102,126,234,.55);
  box-shadow: 0 0 0 4px rgba(102,126,234,.16);
}
.form-hint{ color: var(--muted); font-size: 12px; }

/* buttons */
.btnx{
  border:0;
  border-radius:12px;
  padding:10px 12px;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  cursor:pointer;
  user-select:none;
}
.btnx.primary{
  color:#fff;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 10px 20px rgba(102,126,234,.22);
}
.btnx.ghost{
  color:#334155;
  background: rgba(255,255,255,.75);
  border: 1px solid rgba(31,41,55,.18);
}
.btnx.small{ padding:8px 10px; font-size: 12px; border-radius: 10px; }
.btnx:active{ transform: translateY(1px); }

/* message */
.msg{
  border-radius:12px;
  padding:10px 12px;
  font-size:13px;
  font-weight:800;
}
.msg.ok{ background: rgba(34,197,94,.12); color:#166534; border:1px solid rgba(34,197,94,.25); }
.msg.err{ background: rgba(239,68,68,.12); color:#7f1d1d; border:1px solid rgba(239,68,68,.25); }

.mini-result{
  min-height: 24px;
  font-size: 13px;
  font-weight: 800;
  color:#0f172a;
}

/* ===== 排行榜 ===== */
.rank-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
.rank-list.compact{ gap:8px; }

.rank-item{
  display:flex;
  gap:10px;
  align-items:stretch;
  padding:10px;
  border-radius:14px;
  border:1px solid rgba(31,41,55,.12);
  background:#fff;
}
.rank-item.top1{ border-color: rgba(255,209,102,.45); box-shadow: 0 10px 22px rgba(255,209,102,.12); }
.rank-item.top2{ border-color: rgba(148,163,184,.45); }
.rank-item.top3{ border-color: rgba(251,146,60,.35); }

.rank-num{
  width:34px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
  color:#111827;
}
.rank-main{ flex:1; }
.rank-line{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.rank-name{ font-weight:1000; color:#111827; }
.rank-id{ font-weight:900; color:#64748b; font-size:12px; }
.rank-chips{ display:flex; gap:6px; flex-wrap:wrap; }
.chip{
  font-size:12px;
  font-weight:900;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(31,41,55,.12);
  background: rgba(102,126,234,.08);
  color:#334155;
}
.rank-bar{
  margin-top:8px;
  height:7px;
  background: rgba(15,23,42,.08);
  border-radius:999px;
  overflow:hidden;
}
.bar-fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, rgba(102,126,234,.95), rgba(118,75,162,.95));
  border-radius:999px;
}

/* ===== Modal ===== */
.modal-host{ position:relative; z-index:10; }
.modal-overlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  display:none;
  align-items:center;
  justify-content:center;
  padding: 16px;
}
.modal-container{
  width:min(900px, 96vw);
  max-height: 86vh;
  overflow:auto;
  background: rgba(255,255,255,.98);
  border-radius: 18px;
  border:1px solid rgba(102,126,234,.25);
  box-shadow: var(--shadow);
}
.modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 14px 16px;
  border-bottom:1px solid rgba(31,41,55,.12);
}
.modal-title-icon{ color: #ffd166; }
.modal-close-btn{
  border:0;
  background: transparent;
  font-size: 26px;
  line-height: 1;
  padding: 2px 8px;
  cursor:pointer;
}
.modal-content{ padding: 16px; }
